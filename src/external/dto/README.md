# DTO README（汎用テンプレート）

## 目的

`dto/<domain>` は、入力検証スキーマ（Zod）と UI/Handler で共有する DTO 型を定義します。
Handler 層がここを唯一の入力契約として扱うことで、境界の責務を明確にします。

このREADMEは具体的な実装に依存しない形で、DTO 層の役割を整理したものです。

## ファイル構成と役割

### `<domain>.command.dto.ts`

- **変更系の入力スキーマ**: 作成・更新・削除などの Zod スキーマを定義。
- **入力型の抽出**: `z.input<typeof schema>` で Handler が受け取る型を統一。
- **レスポンス型**: `success`/`error` を持つレスポンス型を定義し、
  UI が扱いやすい形にする。

### `<domain>.query.dto.ts`

- **参照系の入力スキーマ**: 一覧取得のページング等、読み取り条件を定義。
- **レスポンス型**: 一覧・件数・ページ情報など、UI で必要なメタ情報を含める。

### `<domain>.dto.ts`

- **表示用 DTO**: UI が必要とする最小限の表示データを定義。

### `index.ts`

- **公開エクスポート**: command/query/DTO をまとめて re-export する。

## 実装方針（参考）

- **Zod を唯一の入力契約にする**: Handler 入口で必ず `schema.parse` を通す。
- **レスポンス形を統一する**: `success` を必須にし、`error` は任意にする。
- **ドメインを直接返さない**: ドメインエンティティは DTO に変換して返す。
- **エクスポートは集約する**: `@/external/dto/<domain>` のみで参照できるようにする。

## 他モジュールとの関係（参考）

- Handler 層が DTO を使って入力検証・レスポンス型を統一する。
- ドメインで定義された型や Enum を Zod の制約として参照できる。
