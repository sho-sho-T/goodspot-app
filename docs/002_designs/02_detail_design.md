# 詳細設計書

## 1. 画面詳細

### 1.1 ホーム（今日の記録）

- **目的**: 今日の良いことを最短ステップで記録する
- **主要UI**
  - 今日の日付表示
  - 入力欄（最大3件、1件ずつ追加できるUI）
  - 保存ボタン（1回の操作で保存）
  - 保存後は「保存しました」トースト
- **操作フロー**
  1. 入力欄に良いことを記入
  2. 追加が必要なら「+追加」
  3. 保存ボタンで登録
- **バリデーション**
  - 1件あたり文字数: 1〜140文字
  - 1日最大3件
  - 空欄は保存不可

### 1.2 振り返り

- **目的**: 過去の記録を簡単に見返す
- **主要UI**
  - カレンダー/日付リスト
  - 日付を選ぶと当日の最大3件が表示
- **操作フロー**
  1. 日付を選択
  2. 記録一覧が表示

### 1.3 掲示板

- **目的**: 全国の良いことを公開し、誰でも閲覧できるようにする
- **主要UI**
  - スレッド風リスト（時系列）
  - 完全匿名表示（ユーザー名を出さない）
  - フィルタ（今日/今週）
- **操作フロー**
  1. 掲示板を開く
  2. 公開されている良いこと一覧を閲覧

## 2. ユースケース別処理

### 2.1 記録登録

- 受け取った入力を整形（全角空白トリム）
- 当日分の登録数を確認
- 3件超過の場合はエラー
- 登録成功で当日一覧を再取得

### 2.2 公開設定

- 記録はデフォルト公開
- 公開されているデータのみ掲示板で表示

## 3. 状態管理

- **今日の入力状態**: クライアント側フォーム状態
- **保存中状態**: 送信中フラグ
- **エラー状態**: 文字数/件数超過時の表示

## 4. 権限/認可

- 自分の記録は本人のみ編集/削除可能
- 掲示板は公開データのみ閲覧可能
- 認証必須（ログイン必須）

## 5. エラーハンドリング

- 3件超過: 「1日最大3件までです」
- 文字数超過: 「140文字以内で入力してください」
- 通信失敗: 「保存に失敗しました。再試行してください」

## 6. ログ/監視（最小）

- サーバーエラーはログ出力
- 投稿数や日次アクティブは将来分析用に集計
