# リスク & テスト チェックリスト（Risk & Test Checklist）

## 1. 仕様・期待値のリスク
- [ ] 受け入れ条件が明文化されている
- [ ] 非ゴール/スコープ外が明記されている
- [ ] 例外ケース（境界値、空、上限、権限不足）が列挙されている

## 2. 互換性・影響範囲
- [ ] 既存API/画面の契約（レスポンス、ステータス、型）が壊れない
- [ ] 既存データとの整合性（NULL/既存値/不正値）を考慮している
- [ ] 設定値/環境差（dev/stg/prod）に依存する挙動が確認されている

## 3. データ・永続化
- [ ] DBスキーマ変更がある場合、移行手順とロールバックがある
- [ ] 参照整合性（FK/依存レコード）を壊さない
- [ ] 同時更新・競合（ロック、楽観/悲観、リトライ）を想定している

## 4. セキュリティ・認可
- [ ] 認可（誰が実行できるか）が明確
- [ ] 入力バリデーション/サニタイズがある
- [ ] 監査ログが必要なら追加する（誰が何をしたか）
- [ ] 機密情報のログ出力を避ける

## 5. パフォーマンス・可用性
- [ ] N+1や重いクエリが増えない
- [ ] 大量データ時の計算・集計コストを見積もっている
- [ ] タイムアウト/リトライ/バックオフの方針がある（必要な場合）

## 6. 観測性（運用）
- [ ] 失敗時に原因が追えるログがある（エラー詳細、コンテキスト）
- [ ] 重要イベントはメトリクス/通知に繋げられる（必要な場合）

---

# テスト観点

## A. 単体テスト（Unit）
- [ ] バリデーション（正常/異常）
- [ ] 境界値（上限、0、空、最大長、日付境界）
- [ ] 計算ロジック（例: 期限計算、集計）
- [ ] 権限/ポリシー（許可/拒否）

## B. 結合テスト（Integration）
- [ ] DB込みで主要ユースケースが通る
- [ ] 外部I/O（HTTP、キュー、ストレージ）がある場合はスタブ/モック方針が明記
- [ ] トランザクション境界が正しい

## C. E2E
- [ ] 主要ユーザーフロー（作成→更新→参照 など）
- [ ] 失敗時のUI表示/エラーハンドリング
- [ ] 権限差のシナリオ（管理者/一般など）

## D. 回帰テスト
- [ ] 影響範囲の既存機能に対して回帰確認項目がある
- [ ] 既存テストが壊れる場合の修正方針がある